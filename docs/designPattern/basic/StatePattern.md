> 状态模式

## 简介
状态模式也叫状态机模式，允许对象在内部状态发生改变时改变它的行为，对象看起来好像修改了它的类，属于行为型设计模式。  
状态模式中的类的行为由状态决定的，在不同的状态下有不同的行为。其意图是让一个对象在其内部改变的时候，  
行为也随之改变。状态模式的核心是状态与行为绑定，不同的状态对应不同的行为。

## 应用场景
平时网购订单状态变化；平时坐电梯时电梯的状态变化。  
在软件开发中，某一项操作存在不同的情况，最直接处理方式使用if...else或switch...case。但这种方式对于复杂状态的判断存在弊端；  
条件判断语句过于臃肿，可读性差，不具备扩展性，维护难度大。如果将不同的状态独立出来，用各个不同的类进行表示，代码具有层次性，且具备良好的扩展性。  

状态模式主要解决的就是控制一个对象状态的条件表达式过于复杂时的情况。通过把状态的判断逻辑转移到表示不同状态的一系列类中，可以吧复杂的判断逻辑简化。  
对象的行为依赖它的状态，并且行为会随着它的状态改变而改变。状态模式主要适用于以下应用场景。  

1. 行为随状态改变而改变的场景。
2. 一个操作中含有庞大的多分枝结构，并且这些分支取决于对象的状态。

## 优点
1. 结构清晰：将状态独立为类，消除了冗余的if...else或switch...case语句，使代码更加简洁，提高了系统的可维护性。  
2. 将状态转换显示化：通常对象内部都是使用数值类型来定义状态的，状态的切换通过赋值进行表现，不够直观；而使用状态类，  
当切换状态时，是以不同的类进行表示的，转换目的更明确。
3. 状态类职责明确且具备扩展性。

## 缺点
1. 类膨胀：如果一个事实具备很多状态，则会造成状态类太多
2. 状态模式的结构与实现都较为复杂，如果使用不当，将导致程序已代码混乱
3. 状态模式对开闭原则的支持不是很友好，对于可以切换的状态模式，增加新的状态类需要修改哪些负责状态转换的远吗，否则无法切换到新增状态，  
而且修改某个状态类的行为也需要修改对应类的远吗

## 扩展

**状态模式与责任链模式区别**

状态模式和责任链模式都能消除if...else分支过多的问题。但在某些情况下，状态模式中的状态可以理解为责任，在这种情况下，两种模式都可以使用。  
从定义来看，状态模式强调的是一个对象内在状态的改变，而责任链模式强调的是外部节点对象间的改变。  
从代码实现上看，两者间最大区别就是状态模式的各个状态对象知道自己要进入的下一个状态对象，而责任链模式并不清楚其下一个节点处理对象，因为链式组装由客户端负责。  

**状态模式与策略模式区别**

状态模式与策略模式的UML类图架构集合完全一样，但两者的应用场景是不一样的。策略模式的多种算法行为择其一都能满足，彼此之间是独立的，  
用户可以自定更换策略算法；而状态模式的各个状态之间存在相互关系，彼此之间在一定条件下存在自动切换状态的效果，并且用户无法指定状态，只能设置初始状态。  



